<!DOCTYPE html>
<html>
	<head>	
		<!-- <meta charset="UTF-8"> -->
		<link rel="stylesheet"  href= "{{ url_for('static',filename='css/style.css') }}">
		<title>Simulations</title>
	</head>
  <body>
		<!-- Headings -->
		<div class="simulation-header-container">
			<div class = "simulation-header"> 
				<div class = "simulation-header-entry-name">
					<h1>ESPN Bracket Entry {{ espnId }}</h1>
				</div>
				<div class = "simulation-header-simulation-name">
					<h2>Simulation #{{ results['simulation_id'] }}</h2>
				</div>
			</div>
			<div class = "simulation-header-info">
				<div class = "simulation-header-spacer"></div>
				<h2>{{ results['score'] }} points</h2>
			</div>
		</div>
		<div class = "simulation-header-espn-link">
			<h2>{{ results['score'] }} points</h2>
		</div>	
	</body>
			
	<div class = "url-form">
		<form action="{{ url_for('results')}}" method="POST">
			<div>
				<label>Want to simulate again?</label>
			</div>
			<input type="hidden" name ="espnLink" value = "{{ espnLink }}">
			<input type="submit" name="submit" value="Submit">
			<div>
				<label>Or go back to the <a href = "{{ url_for('simulate') }}">home</a> page to simulate for another entry.</label>
			</div>
		</form>
	</div>

	<!-- <div>
		<h3>A. Here's how that stacks up against your simulated competitors...</h3>
		
		<table id="vsPool" class="table table-striped">
			<thead>
			<tr>
				<th># of competitors</th>
				<th>Histogram</th>
				<th>Percentile</th>
				</tr>
			</thead>
			<tbody>
			{% for k, v in results['entryAtSize'].items() %}
				<tr>
				<td align='right'>{{ k }}</td>
				<td> <img src = "data:image/png;base64, {{ v['histPlot'].decode('utf-8') }}" height = 250 width = 350> </td> 
				<td align='right'> {{ v['percentile']}}%</td>
				</tr>
			{% endfor %}
			</tbody>
		</table> -->
		
		<!-- Headings -->
		<!-- <h3>B. Here's your performance against the simulated bracket...</h3>
		<table id="vsSim" class="table table-striped">
			<thead>
			<tr>
				<th>Round</th>
				<th>Game #</th>
				<th>Simulated Winner</th>
				<th>Your Selected Winner</th>
				<th>Your Score</th>
				</tr>
			</thead>
			<tbody>
				<tr style="outline: thin solid">
					<td align='center' style="outline: thin solid"><strong>Total</strong></td>
					<td align='center'></td>
					<td align='center'></td>
					<td align='center'></td>
					<td align='center' style="outline: thin solid"><strong>{{ results['score']}} / 1920</strong></td>
				</tr>
			{% for i in results['visualization'] %}
				<tr>
				<td align='center'>{{ i['label'] }}</td>
				<td align='center'>{{ i['gameNum'] }}</td>
				<td align='left'><img src = "{{ i['c_team']['img'] }}" height = 30 width = 30> {{ i['c_team']['name'] }} ({{i['c_team']['seed']}})</td>
				<td align='left'><img src = "{{ i['u_team']['img'] }}" height = 30 width = 30> {{ i['u_team']['name'] }} ({{i['u_team']['seed']}})</td>
				<td align='center'>{{ i['score'] }}</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
		</div> -->
	</body>

	<script>
	var t = document.getElementById('vsSim');
	if(t) {
		Array.from(t.rows).forEach((tr, rowIdx) => {
			Array.from(tr.cells).forEach((cell, cellIdx) => {
				if (rowIdx == 1){
					tr.style.backgroundColor = 'RGBA(0, 0, 0, 0.1)'
				}
				else if (cellIdx == 4 && rowIdx > 1){
					if (cell.innerText.charAt(0) != '0'){
						tr.style.backgroundColor = 'RGBA(111, 245, 111, 0.5)'
					}
					else{
						tr.style.backgroundColor = 'RGBA(241, 157, 157, 0.5)'

					}
				}
			});
		});
	}
	</script>
</html> 