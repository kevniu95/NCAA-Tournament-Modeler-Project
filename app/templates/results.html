<!DOCTYPE html>
<html>
	<head>	
		<title>HTML Cheat Sheet</title>
	</head>
  <body>
		<!-- Headings -->
		<h2>Your bracket entry scored {{ results[100]['score'] }} points in this simulation.</h2>
		<h3>A. Here's how that stacks up against your simulated competitors...</h3>
	</body>

	<table id="vsPool" class="table table-striped">
		<thead>
		  <tr>
			<th># of competitors</th>
			<th>Histogram</th>
			<th>Percentile</th>
			</tr>
		</thead>
		<tbody>
		  {% for k, v in results.items() %}
			<tr>
			  <td align='right'>{{ k }}</td>
			  <td> <img src = "data:image/png;base64, {{ v['fanHist'].decode('utf-8') }}" height = 250 width = 350> </td> 
			  <td align='right'> {{ v['percentile']}}%</td>
			  </tr>
		  {% endfor %}
		</tbody>
	  </table>
	<body>
		<!-- Headings -->
		<h3>B. Here's your performance against the simulated bracket...</h3>
	</body>
	<table id="vsSim" class="table table-striped">
		<thead>
		  <tr>
			<th>Round</th>
			<th>Game #</th>
			<th>Simulated Winner</th>
			<th>Your Selected Winner</th>
			<th>Your Score</th>
			</tr>
		</thead>
		<tbody>
			<tr style="outline: thin solid">
				<td align='center' style="outline: thin solid"><strong>Total</strong></td>
				<td align='center'></td>
				<td align='center'></td>
				<td align='center'></td>
				<td align='center' style="outline: thin solid"><strong>{{ results[100]['score']}} / 1920</strong></td>
			</tr>
		  {% for i in vis_list %}
			<tr>
			  <td align='center'>{{ i.label }}</td>
			  <td align='center'>{{ i.gameNumber }}</td>
			  <td align='left'><img src = "{{ i.c_team.imgLink }}" height = 30 width = 30> {{ i.c_team.name }} ({{i.c_team.seed}})</td>
			  <td align='left'><img src = "{{ i.u_team.imgLink }}" height = 30 width = 30> {{ i.u_team.name }} ({{i.u_team.seed}})</td>
			  <td align='center'>{{ i.printScore }}</td>
			  </tr>
		  {% endfor %}
		</tbody>
	  </table>

	<script>
	var t = document.getElementById('vsSim');
	if(t) {
		Array.from(t.rows).forEach((tr, rowIdx) => {
			Array.from(tr.cells).forEach((cell, cellIdx) => {
				if (rowIdx == 1){
					tr.style.backgroundColor = 'RGBA(0, 0, 0, 0.1)'
				}
				else if (cellIdx == 4 && rowIdx > 1){
					if (cell.innerText.charAt(0) != '0'){
						tr.style.backgroundColor = 'RGBA(111, 245, 111, 0.5)'
					}
					else{
						tr.style.backgroundColor = 'RGBA(241, 157, 157, 0.5)'

					}
				}
			});
		});
	}
	</script>
</html> 